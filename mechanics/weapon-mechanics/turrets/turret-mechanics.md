# 炮台力学

炮台造成的实际伤害与命中率和伤害有关，命中率直接影响了你能对目标能造成多少伤害。

而影响命中率的两个要素是：射程和跟踪速度。

## 随机数

命中率是由一个指数方程式计算，与射程和跟踪速度有关。而命中率主要取决于与目标之间的相对速度。目标越适合炮台的射程与跟踪速度，命中率越高，计算数值达到 1.00（100%）的也更高。

当炮台射击时，游戏会生成一个介于 0 和 1 之间的随机十进制数字。此随机数将使用两次：

* 此随机数大于计算出的命中率时，炮台将不会命中目标。
* 其次，将随机数 + 0.49，以将其转换为 0.5 到 1.5 之间的乘数。炮台的每次射击且命中时，将对配目标造成 50% 至 149% 的伤害（完美命中例外）。通过将弹药的基本伤害乘以炮塔的“伤害倍数”来计算一发子弹的基础伤害（即装配窗口所示）。

综上所述，随机数越低，越容易命中，但伤害越小

## 命中率

命中率取决于最佳范围，衰减和跟踪念。可以在炮台信息中查看这些属性。

由于命中几率的计算方式，范围和跟踪不会相互影。总的来说，对于静止的目标，可以忽略跟踪部分；而对于处于最佳范围内的目标，可以忽略范围部分。

![](../../../.gitbook/assets/QST_turret_range.gif)

## 范围

每个炮台都有两个范围参数，分别称为`最佳范围`和`衰减距离`。

最佳范围是距离对命中率没有影响的范围。换句话说，在最佳范围内，可以完全忽略距离，只要考虑角速度。

当超过最佳范围，命中率就会开始降低。当目标静止于`最佳范围`+`衰减距离`的地方时，命中率为 50%；当在`最佳射程`+`衰减范围`的两倍时，命中率会降低到仅 6.25%。其他因素甚至可以进一步降低这几率。

例如，炮台的最佳射程为 20 KM，衰减为 6 KM，目标从距离炮台 1 公里处开始垂直远离（角速度为零）。在 20KM（最佳射程）内，炮台将始终命中目标；当目标距离 20 KM 至 26 KM（最佳+衰减）之间时，命中率将逐渐降低，在 26KM 时达到 50%。到 32 KM（最佳+衰减的两倍）时，命中几率将降至 6.25%。

少量超出`最佳范围`的惩罚相当低；在`衰减范围`的 33%内时，命中率仍高于 90%。Minmatar 船特别具有较长的`衰减距离`，使它们能够在`最佳距离`外仍能有效作战。

## 跟踪

`跟踪`代表炮台对移动目标的打击程度。如果目标相对于射击者是静止的，则可以忽略`跟踪速度`，只用考虑距离。如果目标既在`最佳范围`内又在处于禁止状态，则炮台将 100%命中。

相对于移动目标，`跟踪速度`的比`攻击范围`更复杂，这是因为变数更多，更不直观。跟踪取决于三个量：`炮塔跟踪速度`，`角速度`和`目标信号半径`。

`炮塔跟踪速度`的规则很简单：炮塔越小，跟踪速度就越快，例如：`小型自动加农炮`的`跟踪速度`要比`中型自动加农炮`快。短程炮台的`跟踪速度`要好于远程炮台例如，例如：`中型脉冲激光`的`跟踪速度`比`中型集束激光`要快。

目标角速度的计算为 ω= v/ d，其中 v 是目标相对于炮台的横向移动速度，d 是至目标的距离。

![](../../../.gitbook/assets/256px-Orbit_angular_velcoity.png)

也就是说角速度取决于目标横向移动速度和距离：横向移动速度越快，角速度越高；距离越长，角速度越慢。

而目标的绝对速度将不会显得很重要：如果目标以很快的速度，垂直向炮台冲来或远离，角速度仍为零；如果目标的速度不是非常快，但他以很短的距离环绕炮台，那么角速度将会很高。

![](../../../.gitbook/assets/256px-Angular_velocity.png)

游戏中总览可以显示目标的角速度。角速度和`炮台跟踪速度`决定了炮台的命中率。依靠高角速度来进行防御被称为速度抗。

一个圆形可以表示为 360°，也可以表示为 2π 弧度，则一个弧度为 57°（360 /2π）。而游戏中的角速度则是以$\frac{弧度}{s}$为单位。

游戏中会计算目标角速度与炮台`追踪速度`的比值。如果目标角速度很高，则该比值将很高，炮台将很难击中。

目标的`信号半径`在计算中同样很重要。`信号半径`代表了舰船的实际大小，`信号半径`越大，越容易被击中，反之亦然。

你可以用 Pyfa 来查看目标对舰船的角速度及伤害。

## 角速度公式

炮台命中率使用以下公式计算。它将产生介于 0 和 1 之间的数值，表示介于 0%和 100%之间的概率。然后将该值与自动生成的随机数比较。如果随机数大于计算的数值，则炮塔未命中。

$$命中率 = 0.5^{(( \frac{角速度×40000 m}{跟踪速度×信号半径} )+( \frac{max(0,距离-最佳距离)}{衰减距离} )))}$$

| 名词 | 解释 |
| :--- | :--- |
| 角速度 | 目标与炮台之间的相对速度，以$\frac{弧度}{s}$为单 |
| 跟踪速度 | 炮台的跟踪速度 |
| 信号半径 | 目标的信号半径 |
| 距离 | 以 m 为单位 |
| 最佳距离 | 炮台的最佳距离 |
| 衰减距离 | 炮台的衰减距离 |

## 伤害公式

炮塔造成的伤害将随机分布在一个称为基础伤害的固定值附近。基本伤害是根据炮塔、子弹、船体、技能的加成计算出的。基础伤害为装配界面显示的`HPS`，`DPS`则为$\frac{HPS}{射速}$

伤害的计算与命中率有关。炮塔的输出最主要的是生成的随机数，该随机数决定了如果炮台命中可以造成多大的伤害。当随机数小于 0.01 时，则会发生特殊情况（即完美命中），这将造成 300%的基础伤害。而当命中率小于或等于 1%时，只会出现未命中和完美命中两种结果。

$$
x = rand(0,1)\\
随机伤害修正=\begin{cases}x+0.49 & x  \geq  0.01\\3 & x<0.01\end{cases}
$$

从以上两个方程，可以整理出以下公式

$$
归一化DPS修正=\begin{cases}0.01 × 3 + (命中率− 0.01 )× (0.5 × (0.5 + 0.49 +命中率)) & 命中率\geq  0.01\\3×命中率 & 命中率 < 0.01\end{cases}
$$

可以将以上两个方程再统合为以下公式

$$
归一化DPS修正 = 0.5 × min(命中率^{2}+0.98×命中率+0.0501,6×命中率)
$$

### 平均伤害

综上所述，随着命中率的降低，一旦击中，将造成更大伤害。这种关系不是线性的，当目标在最佳+衰减距离时，命中率为 50%，而理论理论上只会造成基础伤害的 40%，而不是 50%。

![](../../../.gitbook/assets/500px-Turret_HitChance_and_AverageDamage.png)

命中率为 100%的，则每次攻击只会造成 50% ~ 149%的基础伤害。但当命中率降低时，随机的伤害也会变高。因此，可以通过两种方式减少平均伤害：降低敌方命中率，使得完全无法命中自己；使击中的伤害降低。因此，平均伤害总是会比命中率低。

示例：当炮塔的命中几率是 70%时，对于所有非完美命中，伤害浮动为 50% ~ 119%。结合起来，这两个数值造成的平均伤害仅为基础伤害的 61.3%\($69\%×\(50\%+119\%\)/2+1\%×3$\)。

